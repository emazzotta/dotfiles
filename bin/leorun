#!/bin/bash
set -e

export LEONARDO_PROJECTS="$HOME/Projects/leo-productions"
export JAVA_LIBRARY_PATH="$LEONARDO_PROJECTS/leonardo/leonardo-leonardo/target/natives.mac"

LEONARDO_DIR="$LEONARDO_PROJECTS/leonardo"
RESOURCES_DIR="$LEONARDO_PROJECTS/leonardo/leonardo-resources"
MAIN_CLASS="ifactory.leonardo.model.LeonardoApplication"

change_dir() {
    echo "üìÅ Changing to: $1"
    cd "$1"
}

echo "üöÄ Starting Leonardo build and run..."
echo "üìÇ Work directory: $LEONARDO_PROJECTS"
echo "üîó JAVA_LIBRARY_PATH=$JAVA_LIBRARY_PATH"
echo "‚òï Main class: $MAIN_CLASS"
echo ""

echo "üî® Building Leonardo..."
change_dir "$LEONARDO_DIR"
mvn clean compile -DskipTests

echo "‚ñ∂Ô∏è  Starting Leonardo application..."
change_dir "$RESOURCES_DIR"
mvn -f "$LEONARDO_DIR/pom.xml" exec:java -pl leonardo-leonardo -Dexec.mainClass="$MAIN_CLASS"

echo "‚úÖ Leonardo startup complete!"

