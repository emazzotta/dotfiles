#!/bin/bash

source leonardo_account

HOST="iserver.leonardo.local"

is_host_reachable() {
    ping -c 1 -W "$1" "$HOST" > /dev/null 2>&1
}

if is_host_reachable 200; then
    leonardo_vpn_toggle --disable
    exit 0
fi

leonardo_vpn_toggle --enable

if is_host_reachable 3000; then
    echo "Leonardo network is reachable."
    leonardo_drive
    exit 0
fi

echo "$HOST is not reachable."
exit 1
