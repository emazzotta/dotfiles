#!/bin/bash

source "${CUSTOM_BIN_DIR}/prettyprint"

dir="."
test "${1}" && dir="${1}"

echo -n "."
if [[ "$(git -C "${dir}" status -s)" != "" ]]; then
    echo 
    substep_info "${dir} [git uncommitted changes]"
    git -C "${dir}" status -s
fi
if [[ "$(git -C "${dir}" log --branches --not --remotes)" != "" ]]; then
    echo
    substep_info "${dir} [git unpushed changes]"
    echo -e "$(git -C "${dir}" log --pretty=format:"%h - %an, %ar: %s%n" --branches --not --remotes)"
fi
if [ "$(git -C "${dir}" stash list)" != "" ]; then
    echo
    substep_info "${dir} [git stashed changes]"
    git -C "${dir}" stash list
fi
