#!/bin/bash

set -e

args=""
for arg in "$@"; do
    args="$args $arg"
done

echo "ğŸ”„ Ensuring VM is running..."
vmup 2>/dev/null || echo "   âœ“ VM already up"

echo ""
echo "ğŸš€ Launching Leonardo on Windows VM..."
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

ssh wlocal "pwsh -Command \"\\\\Mac\\Home\\Projects\\private\\dotfiles\\bin\\leorun.ps1$args\""

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "âœ… Leonardo launch complete"
