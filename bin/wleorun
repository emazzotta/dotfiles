#!/bin/bash

set -e

ps_args=""
for arg in "$@"; do
    case "$arg" in
        -*) ps_args="$ps_args $arg" ;;
        *) ps_args="$ps_args '$arg'" ;;
    esac
done

echo "ðŸ”„ Ensuring VM is running..."
vmup 2>/dev/null || echo "   âœ“ VM already up"

echo ""
echo "ðŸš€ Launching Leonardo on Windows VM..."
ssh wlocal "pwsh -Command \"\\\\Mac\\Home\\Projects\\private\\dotfiles\\bin\\leorun.ps1$ps_args\""
echo "âœ… Leonardo launch complete"
