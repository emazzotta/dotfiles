#!/bin/bash

if command -v tput &> /dev/null; then
    RESET="$(tput sgr0)"
    GREEN="$(tput setaf 10)"
    WHITE="$(tput setaf 15)"
    CYAN="$(tput setaf 14)"
    YELLOW="$(tput setaf 11)"
else
    RESET="\[\033[0m\]"
    GREEN="\[\033[38;5;10m\]"
    WHITE="\[\033[38;5;15m\]"
    CYAN="\[\033[38;5;14m\]"
    YELLOW="\[\033[38;5;11m\]"
fi

export EDITOR='vim'
export PS1="${GREEN}\u@\h${WHITE} ${CYAN}\w ${YELLOW}\\$ ${RESET}"

alias .1='cd ..'
alias .2='.1;.1'
alias .3='.2;.1'
alias .4='.3;.1'
alias .5='.4;.1'
alias .du='du -hsx * | sort -rh | head -10'
alias .s='cd ${HOME}/.ssh'
alias dps='docker ps'
alias dt='cd ${HOME}/Desktop'
alias e='exit'
alias eak='vi ${HOME}/.ssh/authorized_keys'
alias eh='vi ${HOME}/.bash_history'
alias ekh='vi ${HOME}/.ssh/known_hosts'
alias ep='vi ${HOME}/.bashrc;rp'
alias ev='vi .env'
alias l='clear'
alias ll='ls -lta'
alias m='make'
alias mc='make clean'
alias rp='clear;source ${HOME}/.bashrc'
alias rr='rm -rf'
alias sconf='vi ${HOME}/.ssh/config'
alias vdc='vi docker-compose.yml'
alias y='yarn'

CUSTOM_USER="developer"
CUSTOM_IP="192.168.5.8"

CURRENT_USER="$(whoami)"
CURRENT_IP="$(hostname -I 2>/dev/null | awk '{print $1}' || ip addr show 2>/dev/null | grep -oP '(?<=inet\s)\d+(\.\d+){3}' | grep -v 127.0.0.1 | head -n1 || ipconfig getifaddr en0 2>/dev/null)"

if [[ "$CURRENT_USER" == "$CUSTOM_USER" ]] && [[ "$CURRENT_IP" == "$CUSTOM_IP" ]]; then
  echo ""
  echo "‚ö°Ô∏è Recognized host: ${CURRENT_USER}@${CURRENT_IP} ‚Üí ‚öôÔ∏è  custom env loaded"
  echo ""
  export DOCKER_COMPOSE_DIR=/opt/docker-data
  alias .f='cd ${DOCKER_COMPOSE_DIR}'
else
  echo ""
  echo "üåê Generic host: ${CURRENT_USER}@${CURRENT_IP} ‚Üí üì¶  default config"
  echo ""
fi

dc() {
  (cd "${DOCKER_COMPOSE_DIR:-.}" && docker compose "$@")
}
